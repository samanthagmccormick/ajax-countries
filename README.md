<h2>NODE10: Ajax Countries</h2><h3>Objective</h3><p>Build an app that retrieves a list of all countries from the server using an Ajax request and renders them on the client. Add a search box that allows the user to search for a specific country.</p><h3>Resources</h3><ul><li><a href="/public/samples/countries.json" target="_blank">countries.json</a> sample data.</li></ul><h3>Requirements</h3><div class="spaced-out-2"><div class="part"><h4>Part I</h4><ol class="spaced-out-1"><li>Scaffold out a new express app with jade and static file server enabled.</li><li>Add a button to the home page that says "Load Countries". You will add a click handler later.</li><li>Create main.js file in /public/javascripts with <code>console.log('TEST');</code>. Add a script element to layout.jade which includes main.js. Confirm that the console.log is being printed when you load the page.<p class="alert alert-info"><b>Note: </b>We added our <b>client-side</b> Javascript to the public folder because that is the directory that is set up as our static file server. It will serve up the file 'as-is' when requested from the home page.</p></li><li>In main.js, add an event handler so that when the user clicks the button an Ajax request is made to the url '/countries'. Notice the request fail in the Network tab of developer tools. It won't work until we add an appropriate route on the back-end.</li><li>Add a route to app.js which handles the /countries url. For testing purposes add a <code>res.send('TEST');</code> to the body of the route handler. Confirm that the route is set up correctly by clicking the button and seeing that the Ajax request returns successfully. You should see a <code>200</code> success code in Dev Tools.</li><li>Copy <a href="/public/samples/countries.json" target="_blank">countries.json</a> into /models. In app.js, <code>require</code> your model file (<code>require</code> can include json files directly if they end in '.json'; you don't need to convert it into a js file or add module.exports). In the /countries route, print the countries to the <b>server-side</b> console to confirm that the file is defined and required correctly.</li><li>In your /countries route handler, add <code>res.send(countries);</code>. On the client-side, where you make your Ajax request, modify the callback to print the response to the <b>client-side</b> console to confirm that the countries are being sent from the server to the client.</li><li>In your Ajax callback, loop through each country in the response and render a list item for each one into an unordered list on the page.</li></ol></div><div class="part"><h4>Part II</h4><ol class="spaced-out-1"><li>Add a text box and a search button at the top of the page.</li><li>Add a click handler on the search button that makes an Ajax request to /search. Retrieve the value of the text box and pass it as data in the Ajax request.</li><li>Add a /search route on the server-side. Confirm that the Ajax requests hits the correct endpoint using the same approach as step 4 in Part I.</li><li>In the /search route handler, print req.query to see if it contains the search query entered on the front-end.</li><li>Filter the countries array to only the names that match the user's search query, then send the matching countries back to the client.</li><li>On the client-side, where you make your Ajax request, modify the callback to print the response to the <b>client-side</b> console to confirm that only the filtered countries are being sent from the server to the client.</li><li>Render the filtered countries to the user interface using jQuery.</li></ol></div><div class="part"><h4>Bonus I</h4><ol class="spaced-out-1"><li>Add an icon next to each country that allows the user to toggle whether they have traveled to that country or not. When the icon is enabled, send an Ajax request to the server to add a hasTraveled flag to the correct country object.</li><li>Modify the code that renders the country items so that they check the hasTraveled property coming back from the server and renders the icon accordintly.</li><li>Refresh the page and test out the hasTraveled functionality. Because the countries array is stored in memory on the server, you should be able to refresh the page and maintain any changes that are made to the array (i.e. your Ajax request). (Restarting your server will reset the countries array back to the original.</li></ol></div>